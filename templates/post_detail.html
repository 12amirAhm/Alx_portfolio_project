{% extends 'base.html' %}
{% load social_share %}
{% load static %}
{% load humanize %}

{% block content %}

  <script>
    window.addEventListener("load", () => {
  const loader = document.querySelector(".loader");

  loader.classList.add("loader--hidden");

  loader.addEventListener("transitionend", () => {
    document.body.removeChild(loader);
  });
});
  </script>
  <style type = "text/css">  
  
        
    .auto {  
       display: block;  
  
padding-bottom: 100px;  
       width: 100%;  
       height: 950px;  
       overflow: auto;  
    }
    
    .loader {
position: fixed;
top: 0;
left: 0;
width: 100vw;
height: 100vh;
display: flex;
align-items: center;
justify-content: center;
background: #333333;
transition: opacity 0.75s, visibility 0.75s;
}

.loader--hidden {
opacity: 0;
visibility: hidden;
}

.loader::after {
content: "";
width: 75px;
height: 75px;
border: 15px solid #dddddd;
border-top-color: #71c6dd;
border-radius: 50%;
animation: loading 0.75s ease infinite;
}

@keyframes loading {
from {
transform: rotate(0turn);
}
to {
transform: rotate(1turn);
}
}
 </style>  

<main id="main" class="main">
<div class="pagetitle">
  <div style="margin-bottom: 10px;" class="col-xxl-4 col-md-6">
            
  
  </div>
  
</div><!-- End Page Title -->



  <section class="section profile">
    <div class="row">
      <div class="col-xl-4">

       
   
            <div style="width: 22rem;" class="card" >
              {% if post.user == request.user %}
              
              <a style="background-color: red; color: #000; font-size: 13px; margin: 6px; border: solid 0.5px #000;" class="btn btn--dark" href="{% url 'delete-post' post.id %}">
                <i class="fa-solid fa-trash fa-shake"></i>
                Delete 
               </a>
               {% else %}
               <p></p>
               {% endif %}

              {% if post.content.first.file %}
              <a href="" 
              style="font-size: 18px; font-weight: 300; padding: 7px; color: black;"
              href=""> {{ post.caption }}</a>
              <video loop muted autoplay ="autoplay" style="width: 100%; height: 100%; " controls="controls" preload="metadata">
                <source src="{{ post.content.first.file.url }}#t=0.5" type="video/mp4">      
              </video>
           {% else %}
              <p>
                <a href="" 
                style="font-size: 18px; padding: 7px; font-weight: 300;  color: black;"
                href=""> {{ post.caption }}</a>
            </p>
            {% endif %}
            {% if post.postpic %} 
            <img src="{{post.postpic.url }}" />
              {% else %}
             <p>
            </p>
             {% endif %}
            <div class="card-body">
              <div style="display: flex; flex-direction: row; justify-content: space-between; ">
                <div style="margin-top: 5px;">
                  <a href="" class="roomListRoom__author">
                    {% if post.user.profile.picture %}
                    {% if post.user.profile.golden_checker %} 
                    <img style="width: 40px; height: 40px; border-radius: 5px;"  src="{{ post.user.profile.picture.url }}" />
                    {% else %}
                    <img style="width: 40px; height: 40px; border-radius: 50px;"  src="{{ post.user.profile.picture.url }}" />
                    {% endif %}
                 
                {% else %}
                 <img style="width: 40px; height: 40px; border-radius: 50px;" src="{% static '\images\default_profile.png' %}" />
                
                 
                 {% endif %}
                 <div style="display: flex; align-items: center;">
                
                  <span>@{{post.user.username}}</span>
                  <div>
                    {% if post.user.profile.blue_checker %}
                    <i style="font-size: 20px; color: rgb(0, 157, 255);" class="bi bi-patch-check-fill "></i> 
                    {% else %}
                    <p> </p>
                    {% endif %}
                 </div>
                 <div>
                  {% if post.user.profile.golden_checker %} 
                  <i style="font-size: 20px; color: goldenrod;" class="bi bi-patch-check-fill "></i>
                  {% else %}
                  <p> </p>
                  {% endif %}
  
                  </div>
                  <div>
                    {% if post.user.profile.job_checker %} 
                    <i style="font-size: 20px; color: black;" class="fa-solid fa-user-tie "></i>
                    {% else %}
                    <p> </p>
                    {% endif %}
    
                    </div>

                </div>

                 
               
              </a>
             
           </div>
       
              <div >
              <span style="margin: 10px; color: black; font-size: 10px;  float: right;"> {{ post.posted | naturaltime }}</span>
              </div>
           
            </div>
            <div style="display: flex; flex-direction: row; justify-content: space-between; margin-top: 5px; align-items: center;">
              <div style="display: flex; flex-direction: column;">
                <span style="color: black; font-size: 20px;" >{{ post.likes }} 
                <a style="color: black; font-size: 12px;" class="post__name--underline" href="#">likes</a>
              </span>
              <a href="{% url 'postlike' post.id %}">
                <button style="background-color: rgb(0, 157, 255); color: white; font-size: 12px;"  type="button" class="btn btn-outline-success">
                  <i class="fa-solid fa-thumbs-up fa-beat"></i>
                  Like</button>
              </a>
              
              </div>
              
           <div>
            <span style="margin-left: 55px; color: black;">{{ commentNo }} <a style="color: black;" class="post__name--underline" href="#">comments</a>
               <a href="#"></a></span>
            
           </div>   
     

            </div>
            

    <div style="margin-top: 30px; align-items: center; display: flex; align-items: center;">


        
        
     
          
     
      {% if favorited is True %}
      <div class="media-right">
        <a href="{% url 'postfavorite' post.id %}">
          
          <i style="font-size: 25px; color: red; margin-right: 90px; margin-left: 20px;  cursor: pointer; " 
          class="fa-sharp fa-regular fa-circle-xmark">
          </i>
        </a>
        
      </div>
      {% else %}
    <div class="media-right">
        <a href="{% url 'postfavorite' post.id %}">
      <i class="fa-solid fa-file-arrow-down"
          style="font-size: 30px; color: black; 
          margin-right: 90px; margin-left: 20px; 
          cursor: pointer;"
          ></i>
        </a>
     </div>
    {% endif %}

      <span style=" color: black; display: flex; flex-direction: column; justify-content: space-between;"> 
        {% post_to_facebook "ETnets: Check it out!" object_or_url "Facebook" %}
        {% post_to_telegram "ETnets: Check it out!" object_or_url "Telegram"  %}
        {% post_to_twitter  "ETnets:  Check it out!" object_or_url "Twitter" %}
     </span>
  </div>
 
            </div>
          

            
              


      

      </div>
      </div>
      <div style="float: right; margin-left: 40px;" class="col-xl-6">
        <article class="media">
        <p class="image is-64x64">
          {% if request.user.profile.picture %}
          <a >
            <img style="width: 40px; height: 40px; border-radius: 50px;"  src="{{ request.user.profile.picture.url }}" alt="Placeholder image">
          </a>
            
          {% else %}
          <img style="width: 40px; height: 40px; border-radius: 20px;" src="{% static '\images\default_profile.png' %}" />
         
            
          {% endif %}
        </p>
        <label for="room_name">Add your comment here</label>
    
        <form method="post" action="" role="form">
          {% csrf_token %}
         
          <div style="color: black" class="col-sm-2 col-form-label">
            
            {{ form.body }}
          </div>
  
          
          
          <button
          class="btn btn-outline-secondary"
       
          type="submit" 
          name="action"
          onclick="this.classList.toggle('button--loading')"
          href="">
            
            Post
          </button>
        </form>
      </article>
     
         
          
      
             
             
        
           
            
      
           
           
      
            {% for comment in comments %}
            <article style="width: 22rem; margin-top: 5px;" class="card" >
              <div style="display: flex; flex-direction: row; align-items: center; justify-content: space-between; margin: 5px;">
                <div>
                  <figure class="media-left">
                    <p class="image is-64x64">
                      {% if comment.user.profile.picture %}
                      {% if comment.profile.golden_checker %}
                       <a  href="{% url 'profile' comment.user %}" >
                        <img style="width: 40px; height: 40px; border-radius: 5px;"  src="{{ comment.user.profile.picture.url }}" alt="Placeholder image">
                      </a>
                      {% else %}
                      <a  href="{% url 'profile' comment.user %}" >
                        <img style="width: 40px; height: 40px; border-radius: 50px;"  src="{{ comment.user.profile.picture.url }}" alt="Placeholder image">
                      </a>
                      {% endif %}
        
                      
                      {% else %}
                      <a  href="{% url 'profile' comment.user %}">
                        <img style="width: 40px; height: 40px; border-radius: 50px;" src="{% static '\images\default_profile.png' %}" />
                     </a>
                     
                  {% endif %}
                    </p>
                  </figure>
                  {% if comment.user.profile.first_name %}
                  <span>@{{comment.user.username}}</span>
                  <div style="display: flex; align-items: center;">
                    
                    <strong style="color: black; margin-right: 2px;">{{ comment.user.profile.first_name }}</strong>
                  
                    <div>
                      {% if comment.user.profile.golden_checker %} 
                      <i style="font-size: 20px; color: goldenrod;" class="bi bi-patch-check-fill "></i>
                      {% else %}
                      <p> </p>
                      {% endif %}
      
                      </div>
                      <div>
                        {% if comment.user.profile.job_checker %} 
                        <i style="font-size: 20px; color: black;" class="fa-solid fa-user-tie "></i>
                        {% else %}
                        <p> </p>
                        {% endif %}
        
                        </div>
                    <div>
                      {% if comment.user.profile.blue_checker %}
                      <i style="font-size: 20px; color: rgb(0, 157, 255);" class="bi bi-patch-check-fill "></i> 
                      {% else %}
                      <p> </p>
                      {% endif %}
                   </div>



                  </div>
                   
                  {% else %}

                 
                    
                    
               

                     
                   
                  {% endif %}  

                



  
                </div>
               
            
              
                    
               
                
                <div>
                  <span style="color: black; font-size: 12px;"><small>{{ comment.date|naturaltime }}</small></span>
                </div>


              </div>
              
            
              
                <div style="margin-left: 5px;" class="content">
                 
                  <p>
                    
                    <br style="color: black; margin-left: 5px;">
                      {{ comment.body }}
                    <br>
                   
                  </p>
                </div>
            
            </article>
            {% endfor %}
            
            
         
          <!-- End Bordered Tabs -->

        

      </div>
    </div>
  </section>
  </main>
    
  
  
  
  
  

  




{% endblock %}





