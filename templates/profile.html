{% extends 'base.html' %}
{% load social_share %}
{% load static %}
{% load humanize %}

{% block content %}


  <main >
    <style type = "text/css">  
    
    .buttonp {
        background-color:white; color: black; padding: 5px; 
       border-radius: 20px; width: 130px; 
       align-items: center; 
       font-weight: 600;
    }
    
    .buttonp:hover {background-color: white ; color: #000;}
    
    .buttonp:active {
      background-color: gray;
      box-shadow: 0 5px #666;
      transform: translateY(4px);
      color: white;
     
    }
     
    .buttonf {
        background-color:black; color: white; padding: 5px; 
       border-radius: 20px; width: 130px; 
       align-items: center; 
       font-weight: 600;
    }
    
    .buttonf:hover {background-color: white ; color: #000;}
    
    .buttonf:active {
      background-color: gray;
      box-shadow: 0 5px #666;
      transform: translateY(4px);
      color: white;
    }
     
  
        
      .auto {  
         display: block;  
    
 padding-bottom: 100px;  
         width: 100%;  
         height: 950px;  
         overflow: auto;  
      }
      
      .loader {
position: fixed;
top: 0;
left: 0;
width: 100vw;
height: 100vh;
display: flex;
align-items: center;
justify-content: center;
background: #333333;
transition: opacity 0.75s, visibility 0.75s;
}

.loader--hidden {
opacity: 0;
visibility: hidden;
}

.loader::after {
content: "";
width: 75px;
height: 75px;
border: 15px solid #dddddd;
border-top-color: #71c6dd;
border-radius: 50%;
animation: loading 0.75s ease infinite;
}

@keyframes loading {
from {
  transform: rotate(0turn);
}
to {
  transform: rotate(1turn);
}
}




.container2 {
  position: relative;
  
  margin: auto;
  }

  .logo {
    position: absolute;
    border-radius: 50px;
    bottom: -30px;
    
    left: 15px;
   
   
    background-size: 95%;
    background-repeat: no-repeat;
    background-position: center;
 
  }
  @media (min-width: 897px) {
          .mobile {
            display: none;
           
          }
        } 


   </style>  
    <script>
      window.addEventListener("load", () => {
    const loader = document.querySelector(".loader");
  
    loader.classList.add("loader--hidden");
  
    loader.addEventListener("transitionend", () => {
      document.body.removeChild(loader);
    });
  });
    </script>


<main id="main" class="main">
  
  <div class="pagetitle">
    <h1>Profile</h1>
    <nav>
      <ol class="breadcrumb">
        <li class="breadcrumb-item"><a href="index.html">Home</a></li>
        <li class="breadcrumb-item">Users</li>
        <li class="breadcrumb-item active">Profile</li>
      </ol>
    </nav>
  </div><!-- End Page Title -->

  <section class="section profile">
    <div class="row">
      <div class="col-xl-4">

        <div class="card">
          <p style="color: black; font-size: 12px; margin: 7px;">
            <i style="margin-right: 3px; color: black;" class="fa-solid fa-calendar-days"></i>
            Joined on {{profile.created}}
          </p>
          <div class="card-body profile-card pt-4 d-flex flex-column align-items-center">
            {% if profile.picture  %}
            {% if profile.golden_checker %}
            <img style="border-radius: 5px; border: solid 0.5px black;"  src="{{profile.picture.url}}" />
            {% else %}
            <img  style="border: solid 0.5px black;" class="rounded-circle"  src="{{profile.picture.url}}" />
            {% endif %}
            {% else %}
            <img style="border: solid 0.5px black;" class="rounded-circle" src="{% static '\images\default_profile.png' %}" />
            {% endif %}
             <p style="font-size: 12px;  color: black;">@{{profile.user.username}}</p>
            
             <div style="margin-right: 0px; font-size: 20px; display: flex; margin-top: 10px;" class="level-item has-text-centered">
              <p style="color: black; ; margin-right: 7px; font-weight: 200; margin: 2px;" class="title"> <span style="color: black;"> {{ followers_count }}</span>  Followers</p>
              {% if user.is_authenticated and user == profile.user %}
            <p style="color: black; ; margin-left: 20px; margin-right: 7px; font-weight: 200;" class="title"> <span style="color: black;"> {{ following_count }} </span> Following</p>
             {% endif %}
            </div>
              
            <div style="display: flex; flex-direction: row; align-items: center;">
              <div>
                {% if profile.first_name %}
                <h2 style="font-weight: 900; font-size: 19px; color: black; margin-bottom: 10px;">{{profile.first_name}}</h2>
              {% else %}
                  <p></p>
                {% endif %}
              </div>
             

              <div >
                {% if profile.golden_checker %} 
                 <i style=" margin-left: 5px;  font-size: 20px; color: rgb(233, 180, 45);" class="bi bi-patch-check-fill "></i>
                {% else %}
                <p> </p>
                {% endif %}
                </div>
                <div>
                  {% if profile.job_checker %} 
                  <i style="margin-left: 5px;  font-size: 20px; color: black;" class="fa-solid fa-user-tie"></i>
                  {% else %}
                  <p> </p>
                  {% endif %}
                </div>
                <div>
                {% if profile.blue_checker %} 
                <i style="margin-left: 5px;  font-size: 20px; color: rgb(0, 157, 255);;" class="bi bi-patch-check-fill "></i>
                {% else %}
                <p> </p>
                {% endif %}
              </div>

            </div>
          

              {% if user.is_authenticated and user != profile.user %}
              <div class="media-right">
             {% if follow_status == True %}
             <a style="color: black; 
             border-radius: 15px; 
             font-size: 25px; 
             margin-right: 10px; 
             " 
             href="{% url 'newconversation' user.username %}">
           <i class="fa-solid fa-envelope"></i>
            </a>
            <a 
           href="{% url 'follow' profile.user 0 %}" class="btn btn-outline-secondary" >Following
            </a>
               {% else %}
             <a 
           href="{% url 'follow' profile.user 1 %}"  class="btn btn-outline-secondary" >Follow
           </a>
             {% endif  %}
             <div>
            </div>
                </div>
              {% endif %}
             
              
            </div>
       
           
          
           
           
  
    
               
          
          </div>
        </div>

      

      <div class="col-xl-8">

        <div class="card">
          <div class="card-body pt-3">
            <!-- Bordered Tabs -->
            <ul class="nav nav-tabs nav-tabs-bordered">

              <li class="nav-item">
                <button  class="nav-link active" data-bs-toggle="tab" data-bs-target="#profile-overview">Overview</button>
              </li>

              <li class="nav-item">
               
                <button class="nav-link" data-bs-toggle="tab" data-bs-target="#profile-post">
                  <span>{{ posts_count }}</span>
                  Posts
                </button>
              </li>

            

              {% if user.is_authenticated and user == profile.user %}
           
              <li class="nav-item">
                <button class="nav-link" data-bs-toggle="tab" data-bs-target="#profile-money">
                  Monetization
                  <i style="font-size: 23px; color: rgb(248, 216, 32);" class="fa-solid fa-comments-dollar fa-beat"></i> 
                </button>
              </li>


              <li class="nav-item">
                <button class="nav-link" data-bs-toggle="tab" data-bs-target="#profile-post">
                  <a href="{% url 'update-user' %}" class="buttonp" >Edit profile</a>
                  <i class="fa-solid fa-user-pen"></i>
                </button>
             
               
              </li>
              {% else %}
              <p></p>
              {% endif %}
             
            
           
             
            
              <!-- <li class="nav-item">
                <button class="nav-link" data-bs-toggle="tab" data-bs-target="#profile-settings">Following</button>
              </li>

              <li class="nav-item">
                <button class="nav-link" data-bs-toggle="tab" data-bs-target="#profile-change-password">Follower</button>
              </li> -->

             
            

             


            </ul>
            <div class="tab-content pt-2">

              <div style="color: rgb(0, 157, 255) ;" class="tab-pane fade show active profile-overview" id="profile-overview">
           
                {% if profile.profile_info %}
  
                <h5 class="card-title">Bio</h5>
                <p class="small fst-italic" style="color: black; font-size: 20px;">
                
                  {{ profile.profile_info }}
                </p>
    
    
                {% else %}
    
               <p>
  
               </p>
    
                {% endif %}
                

                <h5 class="card-title">Profile Details</h5>
              
                {% if profile.first_name %}
                <div class="row">
                  <div class="col-lg-3 col-md-4 label ">Full Name</div>
                  <div style="color: #000;" class="col-lg-9 col-md-8">{{profile.first_name}}</div>
                </div>
              {% else %}
                  <p></p>
                {% endif %}
               
               
                {% if profile.field_name %}
                <div class="row">
                  <div class="col-lg-3 col-md-4 label ">Field (Industry)</div>
                  <div style="color: #000;"  class="col-lg-9 col-md-8">{{profile.field_name}}</div>
                </div>
              {% else %}
                  <p></p>
                {% endif %}
               
                {% if profile.location %}
                <div class="row">
                  <div class="col-lg-3 col-md-4 label ">Location</div>
                  <div style="color: #000;"  class="col-lg-9 col-md-8">{{profile.location}}</div>
                </div>
              {% else %}
                  <p></p>
                {% endif %}

                {% if profile.url %}
                <div class="row">
                  <div class="col-lg-3 col-md-4 label ">Website</div>
                  <a >{{profile.url}}</a>
                </div>
              {% else %}
                  <p></p>
                {% endif %}

                {% if profile.Phone %}
                <div class="row">
                  <div class="col-lg-3 col-md-4 label ">Phone</div>
                  <div style="color: #000;" class="col-lg-9 col-md-8">{{profile.Phone}}</div>
                </div>
              {% else %}
                  <p></p>
                {% endif %}

                {% if  profile.email %}
                <div class="row">
                  <div class="col-lg-3 col-md-4 label ">Email</div>
                  <div style="color: #000;"  class="col-lg-9 col-md-8"> {{profile.email}}</div>
                </div>
              {% else %}
                  <p></p>
                {% endif %}
              </div>
                <div class="tab-pane fade profile-post" id="profile-post">
                  <div class="container">
                  <div class="gallery">
                      
                    {% for post in posts %}
                    <a  style="cursor: pointer;" >
                      <div class="gallery-item" tabindex="0">
                        {% if post.content.first.file %} 
                       
                        <div 
                        style="font-size: 18px; font-weight: none; color: black; margin-bottom: 5px;"
                      > {{ post.caption }}
                      </div>
                        <video loop muted autoplay ="autoplay" style="width: 50%; height: 70%;" controls="controls" preload="metadata">
                          <source src="{{ post.content.first.file.url }}#t=0.5" type="video/mp4">      
                         
                        </video>
                        <div>
                          <hr class="dropdown-divider">
                        </div>
                      {% else %}
                      <div>
                        <hr class="divider">
                      </div>
          
                        <div
                        style="font-size: 20px; font-weight: none; color: black; margin-bottom: 5px; margin-top: 15px; font-weight: 600;"
                      > {{ post.caption }}
                      </div>
                      
                      {% endif %}
                    {% if post.postpic %} 
                    
                      <div>
                        <img style=" width: 50%; height: 50%;" src="{{post.postpic.url }}" />
                      </div>
                      <div>
                        <hr class="dropdown-divider">
                      </div>
          
                    {% else %}
                      <div class="topics">
                      </div>
                      {% endif %}
                        <div class="gallery-item-info">
                             <ul>
                                <li style="color: rgb(0, 157, 255);" 
                                class="gallery-item-likes"><span 
                                class="visually-hidden">Likes:</span>
                                <i class="fa-solid fa-thumbs-up"></i>
                                 {{post.likes}}</li>
                            </ul>
                        </div>
                        {% if post.user == request.user %}
                        <a style="background-color: red; color: #000; font-size: 12px;" class="btn btn--dark" href="{% url 'delete-post' post.id %}">
                          <i class="fa-solid fa-trash fa-beat"></i>
                          Delete 
                         </a>
                         {% else %}
                         <p></p>
                         {% endif %}
                       
                      </div>
                  </a>
                {% endfor %}
              </div>
            </div>


                </div>
      <div class="tab-pane fade profile-post" id="profile-money">
         <div style="margin-top: 50px; align-items: center;" class="col-lg-14">
           <div class="card card2 h-100">
            <div class="card-body">
            <i style="font-size: 70px; color:rgb(248, 216, 32);" class="bi bi-currency-exchange"></i>
              <h4 style="font-weight: 700; margin: 10px;"> Compelete the Followings to start making Money with ETnets.
              </h4>
              <small class='text-muted'>Recommended For Content Creators</small>
              <br><br>
               <ul>
                <li>Subscribe for ETnets Blue</li>
                <li>You have to reach 10K Follower and 15K Likes</li>
                </ul>
              </div>
            </div>
        </div>
      </div>

                


               

            


              </div>

            </div><!-- End Bordered Tabs -->

          </div>
        </div>

      </div>
    </div>
  </section>

</main>
</main>
{% endblock content %}